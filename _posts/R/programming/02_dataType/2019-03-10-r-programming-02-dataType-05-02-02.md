---
title: "확장 벡터 (메트릭스)"
date: 2019-03-10
category:
  - R
tag :
  - 메트릭스(matrix)
sidebar:
  nav: sidebar-r-programming
mathjax: "true"
author_profile: false
toc: true
toc_label: "Contents"
toc_icon: "cog"
toc_sticky: true
header:
  overlay_image: /assets/images/r.jpg
  overlay_filter: 0.5
comments: true
---
> R > Programming > Data Type

<br>

### 5.2.2 메트릭스(matrix)

- 메트릭스는 원자 벡터를 확장한 것
- 원자 벡터의 2차원 형태의 벡터이다.
- 벡터는 기본적으로 한 방향으로 길게 만들어진 데이터이다.
- 2차원 벡터란 행(1차)과 열(2차)을 가지고 있는 데이터를 의미한다.
- 행과 열의 길이를 속성으로 가지고 있기 때문에 2차원 데이터로 동작한다.

<br>

**1) 메트릭스 데이터 생성**

- 1부터 10까지의 벡터 생성
```R
> nv1 <- 1:10
> nv1
 [1]  1  2  3  4  5  6  7  8  9 10
```

<br>

- `matrix()` 함수를 이용해 행의 개수가 5개(`nrow=5`)인 메트릭스 생성
```R
> mtrx <- matrix(nv1, nrow = 5)
> mtrx
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10
```

<br>

**2) 메트릭스의 type**

- integer 벡터를 사용하여 만들었기 때문에 이 메트릭스의 type도 integer이다.
```R
> typeof(mtrx)
[1] "integer"
```

<br>

**3) 메트릭스의 속성(attribute)**

- 메트릭스는 **dim** 이라는 속성을 가지고 있다.
- dim은 차원(dimension)
```R
$dim
[1] 5 2
```

- 5 2 는 각각 행의 갯수와 열의 갯수를 의미한다.

<br>

- 메트릭스의 dim 속성을 확인하는 `dim()` 함수를 제공한다.
```R
> dim(mtrx)
[1] 5 2
```

<br>

- `length()` 함수를 이용해 메트릭스의 길이, 즉 원천 벡터 데이터의 길이를 알려준다.
```R
> length(mtrx)
[1] 10
```

<br>

**4) 데이터 결합 함수**
- 메트릭스는 메트릭스 자료형의 동작에 기대하는 것과 같이 행과 열 방향의 데이터의 결합을 지원한다.
- `cbind()` : 컬럼 레벨 바인드 (열 방향 결합)
- `rbind()` : 로우 레벨 바인드 (행 방향 결합)

<br>

**(1) 열 방향 결합**
- 5개의 데이터를 가진 벡터 생성
```R
> nv2 <- 10:6
> nv2
[1] 10  9  8  7  6
```

- 5x2 의 메트릭스와 5개 데이터를 갖는 벡터의 열 방향 결합
```R
> mtrx
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10
> cbind(mtrx, nv2)
          nv2
[1,] 1  6  10
[2,] 2  7   9
[3,] 3  8   8
[4,] 4  9   7
[5,] 5 10   6
```

- 5x2 메트릭스와 5개 데이터를 가진 벡터가 열 방향으로 결합하여 **5x3** 메트릭스가 된다.

<br>

**(2) 행 방향 결합**
- 2개의 데이터를 가진 벡터 생성
```R
> nv3 <- 1:2
> nv3
[1] 1 2
```

- 5x2의 메트릭스와 2개 데이터를 갖는 벡터의 행 방향 결합
```R
> mtrx
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10
> rbind(mtrx, nv3)
    [,1] [,2]
       1    6
       2    7
       3    8
       4    9
       5   10
nv3    1    2
```

- 5x2 메트릭스와 2개의 데이터를 가진 벡터가 행 방향으로 결합하여 **6x2** 메트릭스가 된다.

<br>

**5) 메트릭스 데이터 인덱싱**

- 메트릭스는 기본적으로 벡터이다.
- 그러므로 대괄호를 기준으로 인덱싱을 지원한다.
- 행 방향과 열 방향 각각 인덱싱 지원
- 중간에 쉼표(`,`)를 이용하여 행 방향, 열 방향 인덱싱을 지원

<br>

- 5x3 메트릭스(`mtrx_n`) 생성
```R
> mtrx_n <- cbind(mtrx, nv2)
> mtrx_n
          nv2
[1,] 1  6  10
[2,] 2  7   9
[3,] 3  8   8
[4,] 4  9   7
[5,] 5 10   6
```

<br>

**(1) 행, 열 동시 인덱싱**

- 1~3행과 1~2열에 해당하는 메트릭스 데이터 확인
```R
> mtrx_n[1:3, 1:2]        
[1,] 1 6
[2,] 2 7
[3,] 3 8
```

<br>

**(2) 행 인덱싱**

- 쉼표 오른쪽을 공백으로 두면 지정한 행 인덱스에 해당하는 모든 열이 나타난다.
```R
> mtrx_n[1:2,]
         nv2
[1,] 1 6  10
[2,] 2 7   9
```

<br>

**(3) 열 인덱싱**

- 쉼표 왼쪽을 공백ㅇ로 두면 지정한 열 인덱스에 해당하는 모든 행이 나타난다.
- 음수 인덱싱을 사용하면 해당 인덱스를 제외한 나머지 데이터가 나타난다.
```R
> mtrx_n[,-3]
[1,] 1  6
[2,] 2  7
[3,] 3  8
[4,] 4  9
[5,] 5 10
```

<br>

- 음수와 양수를 동시에 사용한 인덱싱은 지원하지 않는다.
```R
> mtrx_n[,c(-3,1)]
Error in mtrx_n[, c(-3, 1)] :
  only 0's may be mixed with negative subscripts
```

<br>

- 이름이 있는 컬럼이 있다면, 이름을 이용해 인덱싱할 수 있다.
```R
> mtrx_n[,"nv2"]
[1] 10  9  8  7  6
```

<br>

**(4) 숫자 인덱싱**

- 메트릭스는 벡터이기도 하다.
- 그렇기 때문에 벡터 인덱싱 방법도 지원한다.

<br>

- `mtrx_n` 확인
```R
> mtrx_n
          nv2
[1,] 1  6  10
[2,] 2  7   9
[3,] 3  8   8
[4,] 4  9   7
[5,] 5 10   6
```

- 메트릭스의 6번째 데이터 확인
```R
> mtrx_n[6]
[1] 6
```

- 메트릭스의 12번째 데이터 확인
```R
> mtrx_n[12]
[1] 9
```

<br>

**6) 메트릭스 데이터 방향 바꾸기**

<br>

**(1) 열 방향으로 메트릭스 생성**

- 10개의 데이터를 가진 벡터 이용, 행 갯수가 5개인 메트릭스 생성
```R
> nv1 <- 1:10
> matrix(nv1, nrow = 5)
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10
```

- 첫 번째 열에서 행이 진행되는 방향으로 숫자가 만들어지고, 그 다음 열(두 번째 열)에서 숫자가 만들어짐
- 아래방향으로 숫자가 만들어지는 게 직관적이지 않을 수 있다.

<br>

**(2) 행 방향으로 메트릭스 생성**

- `byrow = T` 옵션을 사용하여 행 방향으로 메트릭스 생성
```R
> matrix(nv1, nrow = 5, byrow = T)
      [,1] [,2]
[1,]    1    2
[2,]    3    4
[3,]    5    6
[4,]    7    8
[5,]    9   10
```

- 첫 번째 행에서 열이 진행되는 방향으로 숫자가 만들어지고, 그 다음 행(두 번째 행)에서 숫자가 만들어 짐

<br>

- `args()` : 괄호 안의 함수의 옵션을 확인할 수 있는 함수
```R
> args(matrix)
function (data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL)
NULL
```

<br>

**7) 메트릭스 연산**

<br>

**(1) 메트릭스와 스칼라의 연산**

- 스칼라의 데이터는 메트릭스의 모든 요소에 반영되어 연산이 수행됨
```R
> mtrx_n * 10 # 메트릭스 x 스칼라
            nv2
[1,] 10  60 100
[2,] 20  70  90
[3,] 30  80  80
[4,] 40  90  70
[5,] 50 100  60
```
```R
> mtrx_n + 10 # 메트릭스 + 스칼라
           nv2
[1,] 11 16  20
[2,] 12 17  19
[3,] 13 18  18
[4,] 14 19  17
[5,] 15 20  16
```

<br>

**(2) 메트릭스와 벡터의 연산**

- 길이가 다른 데이터와의 연산을 재활용 규칙을 이용해 지원
```R
> mtrx_n + c(1,4,8,3,2) # 5개의 데이터가 3번씩 반복됨
           nv2
[1,]  2  7  11
[2,]  6 11  13
[3,] 11 16  16
[4,]  7 12  10
[5,]  7 12   8
```
```R
> mtrx_n + c(3,9,1) # 3개의 데이터가 5번씩 반복됨
           nv2
[1,]  4  7  19
[2,] 11 10  10
[3,]  4 17  11
[4,]  7 10  16
[5,] 14 13   7
```
